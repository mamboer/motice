!function(t){t(["jquery"],function(t){var i=t("body"),e=t('<div class="motice" />').appendTo(i),s=1,o={image:void 0,width:!1,position:"right-bottom",theme:"default",template:'<div class="motice-item"><div class="motice-progress"></div><button type="button" class="motice-close-button" role="button">&times;</button><div class="motice-title"></div><div class="motice-text"></div></div>',text:"I AM MOTICE",title:null,clickHide:!0,timeOut:3500,timeOutAfterHoverOut:2e3,effect:"default",effectPrefix:"motice-effect-",clShow:"motice-show",clHide:"motice-hide",progressBar:!1,closeButton:!1,onShown:function(){},onHidden:function(){},onClick:null},n="animationend webkitAnimationEnd oAnimationEnd MSAnimationEnd",c={_cache:{"left-top":null,"left-bottom":null,"right-top":null,"right-bottom":null,"fluid-top":null,"fluid-bottom":null,"center-top":null,"center-bottom":null,center:null},get:function(t){return t=void 0!==this._cache[t]?t:o.position,this._cache[t]||this.getPosContainer(t)},getPosContainer:function(i){var s="motice-container motice-container-"+i,o=t("<div/>",{class:s});return e.append(o),this._cache[i]=o,o}},l=function(t){var i=!1,e="Webkit Moz ms O".split(" "),s=document.createElement("div"),o=null;if(t=t.toLowerCase(),void 0!==s.style[t]&&(i=!0),!1===i){o=t.charAt(0).toUpperCase()+t.substr(1);for(var n=0;n<e.length;n++)if(void 0!==s.style[e[n]+o]){i=!0;break}}return i},h={animation:l("animation")&&l("transform")},a=function(t){this.$el=t.$el.find(".motice-progress"),this.intervalId=null,this.hideEta=null,this.maxHideTime=null,this.val=null,this.val0=null};a.prototype={reset:function(){clearTimeout(this.intervalId),this.hideEta=0,this.val0=this.val},update:function(t){this.reset(),this.maxHideTime=t,this.hideEta=(new Date).getTime()+this.maxHideTime},run:function(){function t(){var t=(i.hideEta-(new Date).getTime())/i.maxHideTime*100,e=t;i.val0&&(e=i.val0*(t/100)),i.val=e,i.$el.width(e+"%"),e<=.5&&i.reset()}var i=this;this.maxHideTime<=50||(this.intervalId=setInterval(t,50))}};var r=function(i){this.options=t.extend({},o,i||{}),this.options.clEffect=this.options.effectPrefix+this.options.effect,this.options.autoHide=this.options.timeOut>0,this._init()};r.prototype={_close:function(){this.isHiding=!1,this.isVisible=!1,this.$el.remove(),this.options.onHidden.call(this)},close:function(t){var i=this;if(!this.isHiding){if(t&&this.isShowing&&(this.$el.off(n),this._show()),clearTimeout(this.autoHideTimer),this.isHiding=!0,!h.animation||!this.options.effect)return this._close();this.$el.removeClass(this.options.clShow).addClass(this.options.clHide),this.$el.one(n,function(t){i._close()})}},hide:function(t){this.close(t)},_show:function(){this.isShowing=!1,this.isVisible=!0,this._autoHide(),this.options.onShown.call(this)},show:function(){var t=this;if(!this.isAnimating()){if(this.isShowing=!0,this.$el.removeClass(this.options.clHide).addClass(this.options.clShow),!h.animation||!this.options.effect)return void this._show();this.$el.one(n,function(i){t._show()})}},_autoHide:function(t){var i=this.options,e=this;i.autoHide&&(clearTimeout(this.autoHideTimer),t=t||i.timeOut,this.autoHideTimer=setTimeout(function(){e.close()},t),this.progress&&(this.progress.update(t),this.progress.run()))},isAnimating:function(){return this.isShowing||this.isHiding},_init:function(){this.isVisible=!0,this.isShowing=!1,this.isHiding=!1;var i=this.options,e=this.$el=t(i.template);e[0].id=this.id="motice-"+s++,this.theme=d.themes[i.theme],e.data("motice",this),this._parseDomBySettings(),this._initEvents(),this.show()},_parseDomBySettings:function(){var t=this.options,i=this.$container=c.get(t.position),e=this.$el;e.addClass(this.theme.classes),(this.$text=e.find(".motice-text")).html(t.text),t.title?e.find(".motice-title").html(t.title):e.find(".motice-title").remove(),void 0!==t.image?e.addClass("motice-with-img").css({"background-image":"url("+t.image+")"}):null===t.image&&e.addClass("motice-without-img"),h.animation&&t.effect?e.addClass(t.clEffect):e.addClass("motice-effect-null"),"top"===t.position.slice(-3)?i.prepend(e):i.append(e),t.closeButton||e.find(".motice-close-button").remove(),t.progressBar?this._initProgressBar():e.find(".motice-progress").remove(),t.width&&e.css("width",t.width)},sticky:function(){clearTimeout(this.autoHideTimer),this.progress&&this.progress.reset()},_delayHideOnHoverOut:function(){this._autoHide(this.options.timeOutAfterHoverOut)},_initEvents:function(){var t=this.options,i=this,e=this.$el;t.closeButton&&e.on("click.closeButton",".motice-close-button",function(t){return i.close(),!1}),t.clickHide&&e.on("click.clickHide",function(e){return t.onClick?t.onClick.call(i,e):"A"===e.target.tagName||(i.close(),!1)}),e.hover(function(t){i.sticky()},function(t){i._delayHideOnHoverOut()})},_initProgressBar:function(){this.progress=new a(this)}};var d=function(t){return new r(t)};return d.addTheme=function(t,i){(this.themes=this.themes||{})[t]=i,d[t]=function(t){return function(i,e){return"string"==typeof i&&(i={text:i,title:e}),i=i||{},i.theme=t,d(i)}}(t)},d.close=function(t,i){var e=t.data("motice");e&&e.close(i)},d.addTheme("default",{classes:"motice-theme-default"}),d.addTheme("info",{classes:"motice-theme-info"}),d.addTheme("warning",{classes:"motice-theme-warning"}),d.addTheme("error",{classes:"motice-theme-error"}),d.addTheme("success",{classes:"motice-theme-success"}),d})}("function"==typeof define&&define.amd?define:function(t,i){"undefined"!=typeof module&&module.exports?module.exports=i(require("jquery")):window.Motice=i(window.jQuery)});